(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{12:function(e,t,n){"use strict";n.r(t),n.d(t,"init",function(){return g});var r=n(2),a=n.n(r),c=n(3),o=n(0),i=n(1),u=o.a.plugins.find(function(e){return"weather"===e.name});Object(i.a)("js-plugin-weather");var s=document.getElementById("js-plugin-weather"),l="\n  ".concat(u.corsProxy,"/\n  https://api.darksky.net/forecast/\n  ").concat(u.apiKey,"/\n  ").concat(u.latitude,",").concat(u.longitude,"\n  ?lang=").concat(u.lang,"\n  &units=").concat(u.units,"\n  &exclude=minutely,hourly,flags\n").replace(/\s+/g,""),p=function(e){var t={degrees:"F",speed:"mp/h"};"si"===u.units||"ca"===u.units?(t.degrees="C",t.speed="km/h"):"uk2"===u.units&&(t.degrees="C");var n={summary:e.currently.summary,temp:Math.round(e.currently.temperature),tempHi:Math.round(e.daily.data[0].temperatureHigh),wind:Math.round(e.currently.windSpeed),cloud:Math.round(100*e.currently.cloudCover),precip:Math.round(100*e.currently.precipProbability)};s.innerHTML="Weather in ".concat(u.locationAlias,": ").concat(n.summary,",\n    ").concat(n.temp,"°").concat(t.degrees," (high ").concat(n.tempHi,"°),\n    ").concat(n.wind).concat(t.speed," wind\n    ").concat(n.precip,"% precip.,\n    ").concat(n.cloud,"% cloud cover.")};function d(){return(d=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),s.innerHTML="Weather plugin: Error, see console for details.",e.t0;case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function h(){if(Object(i.c)("localStorage")&&localStorage.getItem("plugin_weather__cache")){var e=JSON.parse(localStorage.getItem("plugin_weather__cache")),t=new Date,n=new Date(1e3*e.currently.time);if((t.getTime()-n.getTime())/1e3<1800)return void p(e)}s.innerHTML="Loading weather data…",function(e){return d.apply(this,arguments)}(l).then(function(e){p(e),Object(i.c)("localStorage")&&localStorage.setItem("plugin_weather__cache",JSON.stringify(e))})}var g=function(){return h()}}}]);